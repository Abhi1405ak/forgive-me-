<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forgive Me ‚ù§Ô∏è</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    overflow:hidden;
    background: radial-gradient(circle,#000000,#1a001a);
    /* Default font for buttons etc */
    font-family: 'Poppins', sans-serif; 
}

/* QUESTION SCREEN */
#questionScreen{
    position:absolute;
    width:100%;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    background: radial-gradient(circle at center,#000000,#1a001a);
    z-index: 2000;
}

.box{
    background: rgba(255,255,255,0.1);
    padding:40px;
    border-radius:20px;
    text-align:center;
    backdrop-filter: blur(15px);
    box-shadow:0 0 40px pink;
    color:white;
    border: 1px solid rgba(255,255,255,0.2);
}

.box h1{
    font-size:30px;
    margin-bottom: 20px;
}

/* BUTTONS */
button{
    padding:12px 25px;
    font-size:18px;
    font-weight: 600;
    margin:10px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    transition: transform 0.2s;
}

button:active{ transform: scale(0.95); }

#yesBtn{ background:#ff0040; color:white; }
#noBtn{ background:#00c853; color:white; }

#forgiveBtn{
    position:absolute;
    bottom:50px;
    left:50%;
    transform:translateX(-50%);
    padding:15px 30px;
    font-size:20px;
    background:pink;
    color:black;
    border:none;
    border-radius:15px;
    display:none;
    z-index:2000;
    box-shadow: 0 0 20px pink;
    font-weight: bold;
}

/* === ROMANTIC MESSAGE (UPDATED STYLE) === */
#messageOverlay{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: #fff;
    z-index: 1000;
    display: none;
    
    /* Darker background for better readability */
    background: rgba(0, 0, 0, 0.6); 
    padding: 40px;
    border-radius: 20px;
    backdrop-filter: blur(5px);
    border: 2px solid rgba(255, 192, 203, 0.5);
    box-shadow: 0 0 50px rgba(255, 20, 147, 0.5);
    width: 85%;
    max-width: 650px;
    animation: fadeIn 2s ease-in forwards;
}

#messageOverlay p {
    /* Using the new readable font */
    font-family: 'Dancing Script', cursive; 
    font-size: 32px; /* Increased size */
    line-height: 1.6;
    margin: 0;
    text-shadow: 2px 2px 4px #000000; /* Black shadow for contrast */
    letter-spacing: 1px;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translate(-50%, -40%); }
    to { opacity: 1; transform: translate(-50%, -50%); }
}

/* SORRY ANIMATION */
.sorryUp,.sorrySide,.sorryJump{
    position:absolute;
    pointer-events:none;
    font-weight: bold;
    z-index: 1500;
    font-family: 'Poppins', sans-serif;
}

@keyframes moveUp{ from{transform:translateY(0);} to{transform:translateY(-120vh);} }
@keyframes moveSide{ from{transform:translateX(0);} to{transform:translateX(120vw);} }
@keyframes jump{ from{transform:translateY(0);} to{transform:translateY(-50px);} }

/* BALLOONS */
.balloon{
    position:absolute;
    bottom:-100px;
    font-size:35px;
    animation: floatUp linear infinite;
    z-index: 500;
}

@keyframes floatUp{ from{transform:translateY(0);} to{transform:translateY(-110vh);} }

/* FLYING IMAGES */
.flyImg{
    position:absolute;
    bottom:-120px;
    width:160px;
    height:160px;
    object-fit:cover;
    z-index: 400;
    clip-path: polygon(50% 90%,15% 60%,5% 40%,10% 20%,25% 10%,40% 15%,50% 25%,60% 15%,75% 10%,90% 20%,95% 40%,85% 60%);
    animation: floatUp linear infinite;
    filter: drop-shadow(0 0 10px pink);
    opacity: 0.8;
}

canvas{
    display:none;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 100;
}
</style>
</head>
<body>

<div id="questionScreen">
    <div class="box">
        <h1>Are you still angry with me? üòî</h1>
        <button id="yesBtn">Yes üòî</button>
        <button id="noBtn">No ‚ù§Ô∏è</button>
    </div>
</div>

<button id="forgiveBtn">Yes, I forgive you ‚ù§Ô∏è</button>

<div id="messageOverlay">
    <p>
        Tere bina to mera dil adhoora hai,<br>
        Tu hi meri hansi, tu hi meri tanhai,<br><br>
        Valentine Day par tumse bas yahi kehta hoon,<br>
        Tum ho meri zindagi ka sabse pyara khwaab<br>
        aur tumse hamesha pyaar karta rahoon. ‚ù§Ô∏è
    </p>
</div>

<canvas id="canvas"></canvas>

<audio id="sorryAudio" loop>
    <source src="sorry.mpeg" type="audio/mpeg">
</audio>

<audio id="loveAudio" loop>
    <source src="love.mpeg" type="audio/mpeg">
</audio>

<script>

/* CONFIGURATION */
const images=[
    "img1.jpeg",
    "img2.jpeg",
    "img3.jpeg",
    "img4.jpeg",
    "img5.jpeg"
];

const sorryAudio = document.getElementById("sorryAudio");
const loveAudio = document.getElementById("loveAudio");

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

const centerX=canvas.width/2;
const centerY=canvas.height/2;

const hearts=[];
const totalHearts=500;

let sorryIntervals=[];
let sorryActive=false;

/* HEART SHAPE */
function heartShape(t,scale=15){
    return{
        x:scale*16*Math.pow(Math.sin(t),3),
        y:-scale*(13*Math.cos(t) -5*Math.cos(2*t) -2*Math.cos(3*t) -Math.cos(4*t))
    };
}

/* === BUTTON LOGIC === */

document.getElementById("yesBtn").onclick=function(){
    document.getElementById("questionScreen").style.display="none";
    document.getElementById("forgiveBtn").style.display="block";
    
    startSorryAnimations();
    
    loveAudio.pause();
    loveAudio.currentTime=0;
    sorryAudio.currentTime=0;
    sorryAudio.play();
};

document.getElementById("forgiveBtn").onclick=function(){
    stopSorryAnimations();

    sorryAudio.pause();
    sorryAudio.currentTime=0;

    loveAudio.currentTime=0;
    loveAudio.play();

    this.style.display="none";
    startHeartMode();
};

document.getElementById("noBtn").onclick=function(){
    document.getElementById("questionScreen").style.display="none";

    loveAudio.currentTime=0;
    loveAudio.play();

    startHeartMode();
};

/* === ANIMATIONS === */

function startSorryAnimations(){
    sorryActive=true;
    
    // Sorry Text Animations
    let up=setInterval(()=>{
        if(!sorryActive)return;
        createSorryElement("sorryUp", "moveUp 4s linear", {bottom: "-50px"});
    },200);

    let side=setInterval(()=>{
        if(!sorryActive)return;
        createSorryElement("sorrySide", "moveSide 5s linear", {left: "-200px", top: Math.random()*window.innerHeight+"px"});
    },300);

    let jump=setInterval(()=>{
        if(!sorryActive)return;
        createSorryElement("sorryJump", "jump 0.8s infinite alternate", {top: Math.random()*window.innerHeight+"px", left: Math.random()*window.innerWidth+"px"});
    },400);

    sorryIntervals=[up,side,jump];
}

function createSorryElement(className, animation, styles){
    let el=document.createElement("div");
    el.innerHTML=["SORRY üòî","SORRY üíî","SORRY üò¢"][Math.floor(Math.random()*3)];
    el.className=className;
    el.style.color=`hsl(${Math.random()*360},100%,60%)`;
    el.style.fontSize=(30+Math.random()*50)+"px";
    if(!styles.left) el.style.left=Math.random()*window.innerWidth+"px";
    Object.assign(el.style, styles);
    el.style.animation=animation;
    document.body.appendChild(el);
    setTimeout(()=>el.remove(),4000);
}

function stopSorryAnimations(){
    sorryActive=false;
    sorryIntervals.forEach(clearInterval);
    document.querySelectorAll(".sorryUp,.sorrySide,.sorryJump").forEach(el=>el.remove());
}

/* === HEART MODE === */

function startHeartMode(){
    canvas.style.display="block";
    document.getElementById("messageOverlay").style.display="block";

    initHearts();
    animateHearts();
    startBalloons();
    startImages();
}

function initHearts(){
    for(let i=0;i<totalHearts;i++){
        let t=Math.random()*Math.PI*2;
        let target=heartShape(t);
        hearts.push({
            x:Math.random()*canvas.width,
            y:Math.random()*canvas.height,
            targetX:centerX+target.x,
            targetY:centerY+target.y,
            size:Math.random()*3+2,
            color:`hsl(${330+Math.random()*30},100%,65%)`,
            speed:Math.random()*0.03+0.02
        });
    }
}

function drawHeart(x,y,size,color){
    ctx.save();
    ctx.shadowColor=color;
    ctx.shadowBlur=15;
    ctx.translate(x,y);
    ctx.rotate(-Math.PI/4);
    ctx.fillStyle=color;
    ctx.beginPath();
    ctx.arc(0,0,size,0,Math.PI*2);
    ctx.arc(size,-size,size,0,Math.PI*2);
    ctx.fill();
    ctx.restore();
}

function animateHearts(){
    ctx.fillStyle="rgba(0,0,0,0.1)"; 
    ctx.fillRect(0,0,canvas.width,canvas.height);
    hearts.forEach(h=>{
        h.x+=(h.targetX-h.x)*h.speed;
        h.y+=(h.targetY-h.y)*h.speed;
        drawHeart(h.x,h.y,h.size,h.color);
    });
    requestAnimationFrame(animateHearts);
}

function startBalloons(){
    setInterval(()=>{
        let b=document.createElement("div");
        b.innerHTML="üíñ";
        b.className="balloon";
        b.style.left=Math.random()*window.innerWidth+"px";
        b.style.animationDuration=(4+Math.random()*4)+"s";
        document.body.appendChild(b);
        setTimeout(()=>b.remove(),8000);
    },500);
}

function startImages(){
    setInterval(()=>{
        let img=document.createElement("img");
        img.src=images[Math.floor(Math.random()*images.length)];
        img.className="flyImg";
        img.style.left=Math.random()*window.innerWidth+"px";
        img.style.animationDuration=(6+Math.random()*5)+"s";
        document.body.appendChild(img);
        setTimeout(()=>img.remove(),10000);
    },1000);
}

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

</script>
</body>
</html>
